{"version":3,"sources":["constants.js","redux/reducer.js","sagas/changePage.js","redux/actions.js","sagas/deletePage.js","sagas/createPage.js","sagas/getPages.js","sagas/mainSaga.js","redux/store.js","components/base/Search.js","components/base/Header.js","assets/images/logo.png","components/base/Layout.js","assets/images/avatar.png","components/base/Field.js","components/Content/DropArea.js","components/Block/index.js","components/Content/index.js","components/Page/index.js","containers/App.js","metrics/Counter.js","metrics/index.js","metrics/helpers.js","metrics/stats.js","index.js"],"names":["METRICS_GUID","API_URL","CHANGE_PAGE_REQUEST","DELETE_PAGE_REQUEST","CREATE_PAGE_REQUEST","CREATE_PAGE_SUCCESS","DRAGGABLE_BLOCK","GET_PAGES_REQUEST","GET_PAGES_SUCCESS","FOCUS_BLOCK","CHANGE_PAGE_TITLE_REQUEST","CHANGE_PAGE_TITLE_SUCCESS","INITIAL_PAGE","title","content","data","initialState","focusBlockId","changePage","changePageWatcher","changePageFetch","id","fetch","method","headers","body","JSON","stringify","then","response","json","action","call","payload","result","type","put","takeEvery","deletePage","deletePageWatcher","deletePageFetch","pageId","createPage","createPageWatcher","createPageFetch","page","getPages","getPagesWatcher","getPagesFetch","mainSaga","all","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","sagaMiddleware","createSagaMiddleware","store","createStore","state","pages","filter","map","applyMiddleware","run","Search","value","onChange","placeholder","className","viewBox","fill","xmlns","d","Header","handleMenu","useState","searchValue","setSearchValue","to","src","alt","e","target","onClick","Layout","children","onDeletePage","onCreatePage","isMenuOpening","setIsMenuOpening","activeClassName","preventDefault","onDelete","Field","onKeyDown","fieldRef","ref","html","DropArea","handleChangeBlockPosition","exceptions","useDrop","accept","canDrop","draggableBlockId","indexOf","drop","collect","monitor","isOver","Block","block","onChangeBlock","onCreateBlock","isFocusing","onDeleteBlock","blockText","useRef","blockRef","useDrag","item","isDragging","drag","preview","useEffect","current","el","focus","selection","getSelection","key","shiftKey","ctrlKey","newBlockData","slice","baseOffset","targetBlockData","replace","length","Content","onChangeBlockPosition","index","nextBlockId","undefined","Fragment","Page","handleChangePage","handleCreateBlock","handleFocusBlock","handleChangeTitle","debouncedOnChangePage","innerWidth","isSmallDevice","onKeyDownTitle","useCallback","currentPage","firstBlock","isHeading","DndProvider","backend","TouchBackend","HTML5Backend","blockId","deletedBlock","find","deletedBlockIndex","changedPage","beforeBlockId","afterBlockId","draggableBlock","flat","connect","dispatch","changePageRequest","handleGetPages","handleDeletePage","deletePageRequest","handleCreatePage","createPageRequest","focusBlock","handleChangePageTitle","changePageTitleRequest","history","useHistory","match","useRouteMatch","params","setCurrentPage","initialPage","push","currentPageId","debounce","debouncedOnChangePageTitle","targetBlock","newBlock","newBlockId","UUIDv4","exact","path","Counter","this","guid","reqid","additional","_inited","_indexes","_countersBatchData","_counterTimerId","counterUrl","prototype","init","setAdditionalParams","additionalParams","Object","assign","send","name","clearTimeout","counterData","counterId","requestId","self","setTimeout","sendBatchRequest","console","warn","navigator","sendBeacon","Blob","xhr","XMLHttpRequest","open","withMetrics","render","counter","String","Math","random","substr","start","Date","now","requestAnimationFrame","renderApp","resources","performance","getEntriesByType","resourceTiming","connectEnd","connectStart","responseEnd","requestStart","domainLookupEnd","domainLookupStart","sendMetrics","quantile","arr","q","sorted","sort","a","b","pos","base","floor","rest","buildRow","hits","p25","p50","p75","p95","preparedByName","logTable","table","ttfb","dns","showMetricsByDate","date","log","sampleData","ReactDOM","document","getElementById","res","timestamp","split","prepareData","firstSampleData","secondSampleData","end","startDate","daysBetween","i","setDate","getDate","dateToCalc","toLocaleString","reverse","join","showMetricByPeriod","showSession","firstData","secondData","compareName","preparedFirstData","preparedSecondData","first","second","compareMetric"],"mappings":"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","file":"static/js/main.92942c74.chunk.js","sourcesContent":["export const METRICS_GUID = '94187e3f-9890-4855-9d47-1415a650589f';\r\nexport const API_URL = 'http://88.198.64.26:5000';\r\n\r\nexport const CHANGE_PAGE_REQUEST = 'CHANGE_PAGE_REQUEST';\r\n\r\nexport const DELETE_PAGE_REQUEST = 'DELETE_PAGE_REQUEST';\r\n\r\nexport const CREATE_PAGE_REQUEST = 'CREATE_PAGE_REQUEST';\r\nexport const CREATE_PAGE_SUCCESS = 'CREATE_PAGE_SUCCESS';\r\n\r\nexport const DRAGGABLE_BLOCK = 'DRAGGABLE_BLOCK';\r\n\r\nexport const GET_PAGES_REQUEST = 'GET_PAGES_REQUEST';\r\nexport const GET_PAGES_SUCCESS = 'GET_PAGES_SUCCESS';\r\n\r\nexport const FOCUS_BLOCK = 'FOCUS_BLOCK';\r\n\r\nexport const CHANGE_PAGE_TITLE_REQUEST = 'CHANGE_PAGE_TITLE_REQUEST';\r\nexport const CHANGE_PAGE_TITLE_SUCCESS = 'CHANGE_PAGE_TITLE_SUCCESS';\r\n\r\nexport const INITIAL_PAGE = {\r\n    title: 'Untitled',\r\n    content: [{ data: '' }]\r\n}","import {\r\n    CHANGE_PAGE_TITLE_SUCCESS,\r\n    CREATE_PAGE_SUCCESS,\r\n    DELETE_PAGE_REQUEST,\r\n    FOCUS_BLOCK,\r\n    GET_PAGES_SUCCESS\r\n} from \"../constants\";\r\n\r\n\r\nconst initialState = {\r\n    focusBlockId: null\r\n};\r\n\r\nexport const reducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n        case FOCUS_BLOCK:\r\n            return { ...state, focusBlockId: action.payload };\r\n        case DELETE_PAGE_REQUEST:\r\n            return { ...state, pages: state.pages.filter(page => page.id !== action.payload) };\r\n        case CREATE_PAGE_SUCCESS:\r\n            return { ...state, pages: [...state.pages, action.payload] };\r\n        case GET_PAGES_SUCCESS:\r\n            return { ...state, pages: action.payload };\r\n        case CHANGE_PAGE_TITLE_SUCCESS:\r\n            return { ...state, pages: state.pages.map(page => page.id === action.payload.id ? action.payload : page) };\r\n        default:\r\n            return state;\r\n    }\r\n}","import { call, put, takeEvery } from \"redux-saga/effects\";\r\n\r\nimport { API_URL, CHANGE_PAGE_REQUEST, CHANGE_PAGE_TITLE_REQUEST } from \"../constants\";\r\nimport { changePageTitleSuccess } from \"../redux/actions\";\r\n\r\n\r\nexport const changePageFetch = ({ id, ...data }) => {\r\n    return fetch(`${API_URL}/pages/${id}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n            'Content-Type': 'application/json;charset=utf-8',\r\n        },\r\n        body: JSON.stringify({ ...data })\r\n    }).then(response => response.json());\r\n}\r\n\r\nfunction* changePage(action) {\r\n    const result = yield call(changePageFetch, action.payload);\r\n\r\n    if (action.type === CHANGE_PAGE_TITLE_REQUEST) {\r\n        yield put(changePageTitleSuccess(result));\r\n    }\r\n}\r\n\r\nexport default function* changePageWatcher() {\r\n    yield takeEvery(CHANGE_PAGE_REQUEST, changePage);\r\n    yield takeEvery(CHANGE_PAGE_TITLE_REQUEST, changePage);\r\n}","import {\r\n    CHANGE_PAGE_REQUEST,\r\n    CHANGE_PAGE_TITLE_REQUEST,\r\n    CHANGE_PAGE_TITLE_SUCCESS,\r\n    CREATE_PAGE_REQUEST,\r\n    CREATE_PAGE_SUCCESS,\r\n    DELETE_PAGE_REQUEST,\r\n    FOCUS_BLOCK,\r\n    GET_PAGES_REQUEST,\r\n    GET_PAGES_SUCCESS,\r\n} from \"../constants\";\r\n\r\n\r\nexport const changePageRequest = (data) => ({ type: CHANGE_PAGE_REQUEST, payload: data });\r\n\r\nexport const deletePageRequest = (data) => ({ type: DELETE_PAGE_REQUEST, payload: data });\r\n\r\nexport const createPageRequest = (data) => ({ type: CREATE_PAGE_REQUEST, payload: data });\r\nexport const createPageSuccess = (data) => ({ type: CREATE_PAGE_SUCCESS, payload: data });\r\n\r\nexport const getPagesRequest = () => ({ type: GET_PAGES_REQUEST });\r\nexport const getPagesSuccess = (data) => ({ type: GET_PAGES_SUCCESS, payload: data });\r\n\r\nexport const changePageTitleRequest = (data) => ({ type: CHANGE_PAGE_TITLE_REQUEST, payload: data });\r\nexport const changePageTitleSuccess = (data) => ({ type: CHANGE_PAGE_TITLE_SUCCESS, payload: data });\r\n\r\nexport const focusBlock = (data) => ({ type: FOCUS_BLOCK, payload: data });","import { call, takeEvery } from \"redux-saga/effects\";\r\n\r\nimport { API_URL, DELETE_PAGE_REQUEST } from \"../constants\";\r\n\r\n\r\nconst deletePageFetch = (pageId) => {\r\n    return fetch(`${API_URL}/pages/${pageId}`, {\r\n        method: 'DELETE',\r\n    });\r\n}\r\n\r\nfunction* deletePage(action) {\r\n    yield call(deletePageFetch, action.payload);\r\n}\r\n\r\nexport default function* deletePageWatcher() {\r\n    yield takeEvery(DELETE_PAGE_REQUEST, deletePage);\r\n}","import { call, put, takeEvery } from \"redux-saga/effects\";\r\n\r\nimport { API_URL, CREATE_PAGE_REQUEST } from \"../constants\";\r\nimport { createPageSuccess } from \"../redux/actions\";\r\n\r\n\r\nconst createPageFetch = (data) => {\r\n    return fetch(`${API_URL}/pages`, {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json;charset=utf-8',\r\n        },\r\n        body: JSON.stringify(data)\r\n    }).then(response => response.json());\r\n}\r\n\r\nfunction* createPage(action) {\r\n    const result = yield call(createPageFetch, action.payload);\r\n    yield put(createPageSuccess(result.page));\r\n}\r\n\r\nexport default function* createPageWatcher() {\r\n    yield takeEvery(CREATE_PAGE_REQUEST, createPage);\r\n}","import { takeEvery, call, put } from 'redux-saga/effects';\r\n\r\nimport { API_URL, GET_PAGES_REQUEST } from \"../constants\";\r\nimport { getPagesSuccess } from \"../redux/actions\";\r\n\r\n\r\nconst getPagesFetch = () => {\r\n    return fetch(`${API_URL}/pages`).then(response => response.json());\r\n}\r\n\r\nfunction* getPages() {\r\n    const result = yield call(getPagesFetch);\r\n    yield put(getPagesSuccess(result));\r\n}\r\n\r\nexport default function* getPagesWatcher() {\r\n    yield takeEvery(GET_PAGES_REQUEST, getPages);\r\n}","import { all, call } from 'redux-saga/effects';\r\n\r\nimport changePageWatcher from \"./changePage\";\r\nimport deletePageWatcher from \"./deletePage\";\r\nimport createPageWatcher from \"./createPage\";\r\nimport getPagesWatcher from \"./getPages\";\r\n\r\n\r\nexport default function* mainSaga() {\r\n    yield all([\r\n        call(changePageWatcher),\r\n        call(deletePageWatcher),\r\n        call(createPageWatcher),\r\n        call(getPagesWatcher),\r\n    ]);\r\n}","import { applyMiddleware, compose, createStore } from \"redux\";\r\nimport createSagaMiddleware from 'redux-saga';\r\n\r\nimport { reducer } from \"./reducer\";\r\nimport mainSaga from \"../sagas/mainSaga\";\r\n\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst sagaMiddleware = createSagaMiddleware();\r\n\r\nconst store = createStore(reducer, composeEnhancers(\r\n    applyMiddleware(sagaMiddleware),\r\n));\r\n\r\nsagaMiddleware.run(mainSaga);\r\n\r\nexport default store;","import './Search.scss';\r\n\r\n\r\nexport const Search = ({ value, onChange, placeholder, className }) => {\r\n\r\n\r\n    return (\r\n        <div className={`search ${className ? className : ''}`}>\r\n            <svg className=\"search_icon\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path d=\"M12.5 11H11.71L11.43 10.73C12.41 9.59 13 8.11 13 6.5C13 2.91 10.09 0 6.5 0C2.91 0 0 2.91 0 6.5C0 10.09 2.91 13 6.5 13C8.11 13 9.59 12.41 10.73 11.43L11 11.71V12.5L16 17.49L17.49 16L12.5 11ZM6.5 11C4.01 11 2 8.99 2 6.5C2 4.01 4.01 2 6.5 2C8.99 2 11 4.01 11 6.5C11 8.99 8.99 11 6.5 11Z\" fill=\"#E9E8E5\"/>\r\n            </svg>\r\n            <input\r\n                className=\"search__input\"\r\n                type=\"text\"\r\n                value={value}\r\n                onChange={onChange}\r\n                placeholder={placeholder}\r\n            />\r\n        </div>\r\n    );\r\n}","import React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { Search } from \"./Search\";\r\n\r\nimport logo from '../../assets/images/logo.png';\r\nimport './Header.scss';\r\n\r\n\r\nexport const Header = ({ handleMenu }) => {\r\n    const [searchValue, setSearchValue] = useState('');\r\n\r\n    const onChangeSearchValue = (e) => {\r\n        setSearchValue(e.target.value);\r\n\r\n    }\r\n\r\n    return (\r\n        <header className=\"header\">\r\n            <Link to=\"/\" className=\"header__logo\">\r\n                <img src={logo} alt=\"Логотип\"/>\r\n                <h1 className=\"header__logo-text\">RC.APP</h1>\r\n            </Link>\r\n            <Search\r\n                value={searchValue}\r\n                onChange={onChangeSearchValue}\r\n                className=\"header__search\"\r\n            />\r\n            <div>\r\n                <svg className=\"header_icon\" viewBox=\"0 0 14 14\" onClick={handleMenu}>\r\n                    <path d=\"M0,1.25 L14,1.25 L14,2.75 L0,2.75 L0,1.25 Z M0,6.25 L14,6.25 L14,7.75 L0,7.75 L0,6.25 Z M0,11.25 L14,11.25 L14,12.75 L0,12.75 L0,11.25 Z\"/>\r\n                </svg>\r\n            </div>\r\n        </header>\r\n    );\r\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAeCAYAAADU8sWcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADESURBVHgB7ZQ9CsJAEEa/MZEUW6URPYIQsBY8iI338CrewjuIhak8gJZRIWAIIRAMZB0vMK6Qn8J5kFQPHgu7H6EDbJ5f4fsTUYrjkNBFvCjuIJqKkjHjEQZE4xr/n/igOI+MzbIFgmAtS/ZExuzhiO8q8lzO0TRbyPEd/53jets1rvFecH/nnndEXW++WBf8ANk0nfGABKKVJDeKohdahmxZHniZVoJT8YmXFIZntIzedo1rvBc+C/fk7yE4FY9QjQ54A4dvL3W0YQdYAAAAAElFTkSuQmCC\"","import React, { useState } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nimport { Header } from \"./Header\";\r\n\r\nimport avatar from '../../assets/images/avatar.png'\r\nimport './Layout.scss';\r\n\r\n\r\n\r\nexport const Layout = ({ pages, children, onDeletePage, onCreatePage }) => {\r\n    const [isMenuOpening, setIsMenuOpening] = useState(() => false);\r\n\r\n    const handleMenu = () => {\r\n        setIsMenuOpening(!isMenuOpening);\r\n    };\r\n\r\n    const onDelete = (e, pageId) => {\r\n        e.preventDefault();\r\n        onDeletePage(pageId);\r\n    };\r\n\r\n    return (\r\n        <div className=\"layout\">\r\n            <Header handleMenu={handleMenu}/>\r\n            <div className=\"layout__body\">\r\n                <div className={`menu${isMenuOpening ? ' menu_active' : ''}`}>\r\n                    <div className=\"client-info\">\r\n                        <img src={avatar} alt=\"Аватар\"/>\r\n                        <div className=\"client-info__body\">\r\n                            <p className=\"client-info__name\">Клиент Клиентов</p>\r\n                            <p>Домен клиента</p>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"menu__pages\">\r\n                        <div>\r\n                            {pages.map(page => (\r\n                                <NavLink\r\n                                    to={`/${page.id}`}\r\n                                    className=\"menu_link\"\r\n                                    activeClassName=\"menu_link-hovered\"\r\n                                    key={page.id}\r\n                                >\r\n                                    <div className=\"menu_link-content\">\r\n                                        <svg viewBox=\"0 0 30 30\" className=\"menu_icon\">\r\n                                            <g>\r\n                                                <path\r\n                                                    d=\"M16,1H4v28h22V11L16,1z M16,3.828L23.172,11H16V3.828z M24,27H6V3h8v10h10V27z M8,17h14v-2H8V17z M8,21h14v-2H8V21z M8,25h14v-2H8V25z\"/>\r\n                                            </g>\r\n                                        </svg>\r\n                                        <div className=\"menu_link-content-text\">\r\n                                            {page.title}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"layout_row\">\r\n                                        <svg\r\n                                            onClick={(e) => onDelete(e, page.id)}\r\n                                            viewBox=\"0 0 30 30\"\r\n                                            className=\"menu_hidden-icon\"\r\n                                        >\r\n                                            <path\r\n                                                d=\"M21,5c0-2.2-1.8-4-4-4h-4c-2.2,0-4,1.8-4,4H2v2h2v22h22V7h2V5H21z M13,3h4c1.104,0,2,0.897,2,2h-8C11,3.897,11.897,3,13,3zM24,27H6V7h18V27z M16,11h-2v12h2V11z M20,11h-2v12h2V11z M12,11h-2v12h2V11z\"/>\r\n                                        </svg>\r\n                                    </div>\r\n                                </NavLink>\r\n                            ))}\r\n                        </div>\r\n                        <div className=\"layout__new-page\" onClick={onCreatePage}>\r\n                            <svg viewBox=\"0 0 16 16\" className=\"layout__new-page-icon\">\r\n                                <path\r\n                                    d=\"M7.977 14.963c.407 0 .747-.324.747-.723V8.72h5.362c.399 0 .74-.34.74-.747a.746.746 0 00-.74-.738H8.724V1.706c0-.398-.34-.722-.747-.722a.732.732 0 00-.739.722v5.529h-5.37a.746.746 0 00-.74.738c0 .407.341.747.74.747h5.37v5.52c0 .399.332.723.739.723z\"/>\r\n                            </svg>\r\n                            <p>New page</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className={`layout__content${isMenuOpening ? ' layout_bg-dark' : ''}`}>\r\n                    {children}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAtCAYAAAA6GuKaAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAOZSURBVHgB1Vm7UttAFL2SDbTOF4R8AZqBoUV8AeQLwAUzPAr0B9hfEKvhMRSQLh1QZVJFdJmBIeILcLp0EaUB2zlHWXlkRcbG8mN1ZjS7Xq21R1d3796HIRmxtbVlFYtF2zCMBVxWu90uYXg+NiXAuI/xANf1y8uLd3p66ksGGDIEtre3503T3EDXISlcV61Wy282m36hUAiOj4/r8blo5kGcL7OOdkXd8vCfanzuWEiTAEidQWIWfrrPz8+Xw0iNzwH5inqBN5MfiLTjOKWnp6d9+SdZd3Z2tgYEMgLs7Ow4IM9nnx8eHlYH+U9f0koVvkO6/tzcXHlUZJNrRJKH1Ff7Sd3o8zAbhKkO7tHRUU3GDCX1A6xXxnqXveYVet3Y29vbwANq0NuPJycnPR8wStze3v6wLOsb983y8nJwc3NznzYvVdJ4Y+7yT4N8qnEgUkmsX8b6XvK+0eMPPyHh1az2NAto/2dmZi7SBGcmJ6tNV50mYYLrcy+RD61X/F4X6d3d3QM03iQ23SAgD1otmFsnPt4hrU6uTRp60Qg0s2j2Fb8QHdL4DDQ17jQ23mtQ54ILw3AWjYWk1VvYuqhFEjyB6YxF0g5JU8poPNEUkbTBc5O/I/WwddPlFPCAo48iBiwGPbYLOCsfRHOA6wNPaBObzxaNVSOBKwYcJj0rEL+SHICBBiMkki4xFJIcABuRp7RF9bDgVT1IDgBJU7glKndbcgTyNSWHyC3pOqKU95IDqGM8oPUI4Pq9k3yAAbBvYkfeI0KwJAegeUZC6LGIfmj7JAcA6TU0HtXDQ2dN8gGbucCwB9v3h4GkaAxuQjpM7Ecmz4Ver4vGiPv8IWlsxnM0+8moVzN0fP6QNOPCtKhXF0At6Px7UfzaORGZPxMNpa0OFCceWXVIq7dwG43GmWgEpcuf41mCLt8jinqZvRQNoNTCRihYiY93kWbUy9wZk9zTNoFq/Qr5JO/95+XxMzBbyeRfPKszSXBdrs99lpY8Ss1PI09cX1xcfGRCHfni67u7u98yIahq2Vd0q0gefUmb0zOpDuL+0tLSL4RiF2gbTHjLmEEdxno1funXKgED11wkQwmtH2hmabVoBDLXXOKAFCpoNkZZfxm2avbmOmKW+l8EleWnZ8nCEIum5ZHXEZNIkCc8JnxU/qSerNiCVAm6ylTFAubQMeOp69LnGXvFNg2x2viKSvxYilSEOkM6+ja47kdRG/8L0F0HRlf+BWcAAAAASUVORK5CYII=\"","import ContentEditable from \"react-contenteditable\";\r\n\r\nimport './Field.scss';\r\n\r\n\r\nexport const Field = ({ value, onChange, className, onKeyDown, fieldRef }) => {\r\n\r\n    return (\r\n        <ContentEditable\r\n            ref={fieldRef}\r\n            html={value}\r\n            onChange={onChange}\r\n            onKeyDown={onKeyDown}\r\n            className={`field ${className ? className : ''}`}\r\n        />\r\n    );\r\n}","import { useDrop } from \"react-dnd\";\r\n\r\nimport { DRAGGABLE_BLOCK } from \"../../constants\";\r\n\r\nimport './DropArea.scss';\r\n\r\n\r\nexport const DropArea = ({ handleChangeBlockPosition, exceptions}) => {\r\n    const [{ isOver }, drop] = useDrop(() => ({\r\n        accept: DRAGGABLE_BLOCK,\r\n        canDrop: ({ draggableBlockId }) => exceptions.indexOf(draggableBlockId) === -1,\r\n        drop: ({ draggableBlockId }) => handleChangeBlockPosition(draggableBlockId),\r\n        collect: monitor => ({\r\n            isOver: !!monitor.isOver(),\r\n        }),\r\n    }), [handleChangeBlockPosition]);\r\n\r\n    return (\r\n        <div ref={drop} className={`drop-area${isOver ? ' drop-area_over' : ''}`}/>\r\n    );\r\n}","import { useDrag } from \"react-dnd\";\r\nimport { useEffect, useRef } from \"react\";\r\n\r\nimport { DRAGGABLE_BLOCK } from \"../../constants\";\r\n\r\nimport { Field } from \"../base/Field\";\r\n\r\nimport \"./index.scss\";\r\n\r\n\r\nconst Block = ({ block, onChangeBlock, onCreateBlock, isFocusing, onDeleteBlock }) => {\r\n    const blockText = useRef(block.data);\r\n    const blockRef = useRef();\r\n\r\n    const [{ isDragging }, drag, preview] = useDrag(() => ({\r\n        type: DRAGGABLE_BLOCK,\r\n        item: { draggableBlockId: block.id },\r\n        collect: (monitor) => ({\r\n            isDragging: !!monitor.isDragging()\r\n        })\r\n    }));\r\n\r\n    const onKeyDown = (e) => {\r\n        const selection = window.getSelection();\r\n        switch (e.key) {\r\n            case 'Enter':\r\n                if (!e.shiftKey && ! e.ctrlKey) {\r\n                    e.preventDefault();\r\n                    const newBlockData = blockText.current.slice(selection.baseOffset);\r\n                    const targetBlockData = blockText.current.replace(newBlockData, '');\r\n\r\n                    onCreateBlock({ id: block.id, data: targetBlockData }, { data: newBlockData });\r\n                }\r\n                break;\r\n            case 'Backspace':\r\n                if (blockText.current.length === 0) {\r\n                    onDeleteBlock(block.id);\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    };\r\n\r\n    const onChange = (e) => {\r\n        const value = e.target.value;\r\n\r\n        blockText.current = value;\r\n        onChangeBlock(block.id, value);\r\n    };\r\n\r\n    const onPlus = () => {\r\n        onCreateBlock(block, { data: '' });\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (isFocusing) {\r\n            const element = blockRef.current.el.current;\r\n            element.focus();\r\n        }\r\n    }, [isFocusing]);\r\n\r\n    return (\r\n        <div className=\"block\" ref={preview}>\r\n            {!isDragging && (\r\n                <div className=\"block__handlers-group\">\r\n                    <span className=\"block_plus\" onClick={onPlus}>+</span>\r\n                    <span ref={drag} className=\"block_drag\">::</span>\r\n                </div>\r\n            )}\r\n            <Field\r\n                value={blockText.current}\r\n                onChange={onChange}\r\n                onKeyDown={onKeyDown}\r\n                fieldRef={blockRef}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Block;","import React from \"react\";\r\nimport { DropArea } from \"./DropArea\";\r\n\r\nimport Block from \"../Block\";\r\n\r\nimport './index.scss';\r\n\r\n\r\nconst Content = ({\r\n                     content,\r\n                     onDeleteBlock,\r\n                     onCreateBlock,\r\n                     onChangeBlock,\r\n                     onChangeBlockPosition,\r\n                     focusBlockId\r\n                 }) => {\r\n\r\n    return (\r\n        <div className=\"column-content\">\r\n            {content.map((block, index) => {\r\n                const nextBlockId = content[index + 1]?.id;\r\n                let key = block.id;\r\n\r\n                if (nextBlockId !== undefined) {\r\n                    key = `${block.id}-${nextBlockId}`;\r\n                }\r\n\r\n                return (\r\n                    <React.Fragment key={key}>\r\n                        {index === 0 && (\r\n                            <DropArea\r\n                                handleChangeBlockPosition={(draggableBlockId) => onChangeBlockPosition(draggableBlockId, null, block.id)}\r\n                                exceptions={[block.id]}\r\n                            />\r\n                        )}\r\n                        <Block\r\n                            block={block}\r\n                            onCreateBlock={onCreateBlock}\r\n                            onDeleteBlock={onDeleteBlock}\r\n                            onChangeBlock={onChangeBlock}\r\n                            isFocusing={focusBlockId === block.id}\r\n                        />\r\n                        <DropArea\r\n                            handleChangeBlockPosition={(draggableBlockId) => onChangeBlockPosition(draggableBlockId, block.id)}\r\n                            exceptions={[block.id, nextBlockId]}\r\n                        />\r\n                    </React.Fragment>\r\n                );\r\n            })}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Content;","import { useCallback, useState } from \"react\";\r\nimport { DndProvider } from \"react-dnd\";\r\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\r\nimport { TouchBackend } from \"react-dnd-touch-backend\";\r\n\r\nimport { Field } from \"../base/Field\";\r\nimport Content from \"../Content\";\r\n\r\nimport './index.scss';\r\n\r\n\r\nconst Page = ({ page, handleChangePage, handleCreateBlock, focusBlockId, handleFocusBlock, handleChangeTitle, debouncedOnChangePage }) => {\r\n    const [isSmallDevice] = useState(window.innerWidth < 568);\r\n\r\n    const onDeleteBlock = (blockId) => {\r\n        handleChangePage((currentPage) => {\r\n            if (currentPage.content.length > 1) {\r\n                const deletedBlock = currentPage.content.find(block => block.id === blockId);\r\n                const deletedBlockIndex = currentPage.content.indexOf(deletedBlock);\r\n                const changedPage = {\r\n                    ...currentPage,\r\n                    content: currentPage.content.filter(block => block.id !== blockId)\r\n                };\r\n\r\n                handleFocusBlock(currentPage.content[deletedBlockIndex - 1].id);\r\n                debouncedOnChangePage(changedPage);\r\n                return changedPage;\r\n            } else {\r\n                return currentPage;\r\n            }\r\n        });\r\n    };\r\n\r\n    const onChangeBlock = (blockId, data) => handleChangePage((currentPage) => {\r\n        const changedPage = {\r\n            ...currentPage,\r\n            content: currentPage.content.map(block => block.id === blockId ? { ...block, data } : block)\r\n        };\r\n\r\n        debouncedOnChangePage(changedPage);\r\n        return changedPage;\r\n\r\n    });\r\n\r\n    const onChangeBlockPosition = (draggableBlockId, beforeBlockId, afterBlockId) => {\r\n\r\n        handleChangePage((currentPage) => {\r\n            const draggableBlock = currentPage.content.find(block => block.id === draggableBlockId);\r\n            const changedPage = {\r\n                ...currentPage,\r\n                content: currentPage.content\r\n                .filter(block => block.id !== draggableBlockId)\r\n                .map(block => {\r\n                    if (afterBlockId && block.id === afterBlockId) {\r\n                        return [draggableBlock, block];\r\n                    } else if (beforeBlockId && block.id === beforeBlockId) {\r\n                        return [block, draggableBlock];\r\n                    } else {\r\n                        return block;\r\n                    }\r\n                })\r\n                .flat()\r\n            };\r\n\r\n            debouncedOnChangePage(changedPage)\r\n            return changedPage;\r\n\r\n        });\r\n    };\r\n\r\n    const onKeyDownTitle = useCallback((e) => {\r\n        if (e.key === 'Enter') {\r\n            e.preventDefault();\r\n            handleChangePage((currentPage) => {\r\n                const firstBlock = currentPage.content[0].id;\r\n\r\n                handleFocusBlock(firstBlock);\r\n                return currentPage;\r\n            })\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"page\">\r\n            <header className=\"page__header\">\r\n                <Field\r\n                    className=\"field_heading\"\r\n                    isHeading={true}\r\n                    value={page.title}\r\n                    onKeyDown={onKeyDownTitle}\r\n                    onChange={handleChangeTitle}\r\n                />\r\n            </header>\r\n            <DndProvider backend={isSmallDevice ? TouchBackend : HTML5Backend}>\r\n                <Content\r\n                    content={page.content}\r\n                    onDeleteBlock={onDeleteBlock}\r\n                    onCreateBlock={handleCreateBlock}\r\n                    onChangeBlock={onChangeBlock}\r\n                    onChangeBlockPosition={onChangeBlockPosition}\r\n                    focusBlockId={focusBlockId}\r\n                />\r\n            </DndProvider>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Page;\r\n","import { useCallback, useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Redirect, Route, Switch, useHistory, useRouteMatch } from \"react-router-dom\";\r\nimport debounce from 'lodash.debounce';\r\nimport { v4 as UUIDv4 } from 'uuid';\r\n\r\nimport {\r\n    changePageRequest, changePageTitleRequest,\r\n    createPageRequest,\r\n    deletePageRequest,\r\n    focusBlock,\r\n    getPagesRequest\r\n} from \"../redux/actions\";\r\nimport { INITIAL_PAGE } from \"../constants\";\r\n\r\nimport { Layout } from \"../components/base/Layout\";\r\nimport Page from \"../components/Page\";\r\n\r\n\r\nconst App = ({\r\n                 pages,\r\n                 focusBlockId,\r\n                 handleChangePage,\r\n                 handleGetPages,\r\n                 handleDeletePage,\r\n                 handleCreatePage,\r\n                 handleFocusBlock,\r\n                 handleChangePageTitle\r\n             }) => {\r\n    const history = useHistory();\r\n    const match = useRouteMatch('/:pageId');\r\n    const pageId = match?.params?.pageId;\r\n\r\n    const [currentPage, setCurrentPage] = useState();\r\n\r\n    useEffect(() => {\r\n        if (pageId && pages) {\r\n            const initialPage = pages.find(page => page.id === pageId);\r\n\r\n            if (initialPage) {\r\n                setCurrentPage(initialPage);\r\n            } else if (pages.length !== 0) {\r\n                history.push(`/${pages[0].id}`);\r\n            }\r\n        }\r\n    }, [pageId, pages]);\r\n\r\n    useEffect(() => {\r\n        handleGetPages();\r\n    }, []);\r\n\r\n    const onDeletePage = useCallback((pageId) => {\r\n        handleDeletePage(pageId);\r\n        const { currentPageId } = match.params;\r\n\r\n        if (currentPageId === pageId && pages.length !== 0) {\r\n            history.push(`/${pages[0].id}`);\r\n        }\r\n    }, [pages, match?.params]);\r\n\r\n    const onCreatePage = useCallback(() => handleCreatePage(INITIAL_PAGE), []);\r\n\r\n    const debouncedOnChangePage = useCallback(debounce(handleChangePage, 2500), []);\r\n    const debouncedOnChangePageTitle = useCallback(debounce(handleChangePageTitle, 2500), []);\r\n\r\n    const onCreateBlock = useCallback((targetBlock, newBlock) => {\r\n        const newBlockId = UUIDv4();\r\n\r\n        handleFocusBlock(newBlockId);\r\n        setCurrentPage((currentPage) => {\r\n            const changedPage = {\r\n                ...currentPage,\r\n                content: currentPage.content\r\n                .map(block => block.id === targetBlock.id ? [targetBlock, { ...newBlock, id: newBlockId }] : block)\r\n                .flat()\r\n            };\r\n\r\n            debouncedOnChangePage(changedPage);\r\n            return changedPage;\r\n        });\r\n    }, [debouncedOnChangePage]);\r\n\r\n    const handleChangeTitle = (e) => {\r\n        setCurrentPage((currentPage) => {\r\n            const changedPage = {\r\n                ...currentPage,\r\n                title: e.target.value\r\n            };\r\n\r\n            debouncedOnChangePageTitle(changedPage);\r\n            return changedPage;\r\n        });\r\n    };\r\n\r\n    if (pages) {\r\n\r\n        return (\r\n            <Layout\r\n                pages={pages}\r\n                onDeletePage={onDeletePage}\r\n                onCreatePage={onCreatePage}\r\n            >\r\n                {pages.length !== 0 ? (\r\n                    <Switch>\r\n                        <Route exact path=\"/\">\r\n                            <Redirect to={`/${pages[0].id}`}/>\r\n                        </Route>\r\n                        <Route path=\"/:pageId\">\r\n                            {currentPage && (\r\n                                <Page\r\n                                    page={currentPage}\r\n                                    focusBlockId={focusBlockId}\r\n                                    handleFocusBlock={handleFocusBlock}\r\n                                    handleChangeTitle={handleChangeTitle}\r\n                                    handleChangePage={setCurrentPage}\r\n                                    handleCreateBlock={onCreateBlock}\r\n                                    debouncedOnChangePage={debouncedOnChangePage}\r\n                                />\r\n                            )}\r\n                        </Route>\r\n                    </Switch>\r\n                ) : (\r\n                    <p>No pages</p>\r\n                )}\r\n            </Layout>\r\n        );\r\n    } else {\r\n        return null;\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    pages: state.pages,\r\n    focusBlockId: state.focusBlockId\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n    handleChangePage: (data) => dispatch(changePageRequest(data)),\r\n    handleGetPages: () => dispatch(getPagesRequest()),\r\n    handleDeletePage: (data) => dispatch(deletePageRequest(data)),\r\n    handleCreatePage: (data) => dispatch(createPageRequest(data)),\r\n    handleFocusBlock: (data) => dispatch(focusBlock(data)),\r\n    handleChangePageTitle: (data) => dispatch(changePageTitleRequest(data))\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","/**\r\n * Лимит на число счетчиков в одном запросе\r\n *\r\n * @type {Number}\r\n */\r\nvar MAX_BATCH_COUNTERS = 42;\r\n\r\n/**\r\n * Интервал в миллисекундах, в течение которого счётчики склеиваются\r\n *\r\n * @type {Number}\r\n */\r\nvar COUNTERS_BATCH_TIMEOUT = 15;\r\n\r\nfunction Counter() {\r\n    this.guid = '';\r\n    this.reqid = '';\r\n    this.page = '';\r\n    this.additional = {};\r\n\r\n    this._inited = false;\r\n    this._indexes = {};\r\n    this._countersBatchData = [];\r\n    this._counterTimerId = null;\r\n\r\n    this.counterUrl = 'https://shri.yandex/hw/stat/send';\r\n}\r\n\r\nCounter.prototype.init = function(guid, reqid, page) {\r\n    if (guid && reqid && page) {\r\n        this.guid = guid;\r\n        this.reqid = reqid;\r\n        this.page = page;\r\n\r\n        this._inited = true;\r\n    }\r\n};\r\n\r\nCounter.prototype.setAdditionalParams = function(additionalParams) {\r\n    this.additional = Object.assign({}, additionalParams);\r\n};\r\n\r\n/**\r\n * Отправка счётчика. Основной транспорт - sendBeacon, запасной - XMLHttpRequest. Быстро поступающие одиночные события\r\n * накапливаются и отправляются пачками по MAX_BATCH_COUNTERS штук.\r\n *\r\n * @param {String} name\r\n * @param {Number} value\r\n */\r\nCounter.prototype.send = function(name, value) {\r\n    if (!this._inited) {\r\n        console.warn('counter is not inited');\r\n\r\n        return;\r\n    }\r\n\r\n    clearTimeout(this._counterTimerId);\r\n\r\n    if (!this._indexes[name]) {\r\n        this._indexes[name] = 0;\r\n    }\r\n\r\n    var counterData = {\r\n            counterId: this.guid,\r\n            requestId: this.reqid,\r\n            page: this.page,\r\n            name: name,\r\n            value: value,\r\n            index: this._indexes[name],\r\n            additional: this.additional\r\n        },\r\n        self = this;\r\n\r\n    this._countersBatchData.push(counterData);\r\n\r\n    this._indexes[name]++;\r\n\r\n    if (this._countersBatchData.length < MAX_BATCH_COUNTERS) {\r\n        this._counterTimerId = setTimeout(function() {\r\n            self.sendBatchRequest();\r\n        }, COUNTERS_BATCH_TIMEOUT);\r\n    } else {\r\n        self.sendBatchRequest();\r\n    }\r\n};\r\n\r\nCounter.prototype.sendBatchRequest = function() {\r\n    var data = JSON.stringify(this._countersBatchData);\r\n\r\n    this._countersBatchData = [];\r\n    this._counterTimerId = null;\r\n\r\n    var sendBeaconPostAvailable = navigator.sendBeacon,\r\n        sendBeaconResult = sendBeaconPostAvailable && navigator.sendBeacon(this.counterUrl, new Blob([data], {type : 'application/json'}));\r\n\r\n    if (!sendBeaconResult) {\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open('POST', this.counterUrl);\r\n        xhr.send(data);\r\n    }\r\n}\r\n\r\nexport default Counter;","import Counter from \"./Counter\";\r\nimport { API_URL, METRICS_GUID } from \"../constants\";\r\n\r\n\r\nconst renderApp = (counter, render) => {\r\n    const start = Date.now();\r\n\r\n    render();\r\n\r\n    requestAnimationFrame(function () {\r\n        counter.send('render', Date.now() - start);\r\n    });\r\n};\r\n\r\nconst sendMetrics = (counter) => {\r\n    const resources = performance.getEntriesByType(\"resource\");\r\n\r\n    for (const resourceTiming of resources) {\r\n        if (resourceTiming.name === `${API_URL}/pages`) {\r\n            counter.send('connect', resourceTiming.connectEnd - resourceTiming.connectStart);\r\n            counter.send('ttfb', resourceTiming.responseEnd - resourceTiming.requestStart);\r\n            counter.send('dns', resourceTiming.domainLookupEnd - resourceTiming.domainLookupStart);\r\n        }\r\n    }\r\n};\r\n\r\nconst withMetrics = (render) => {\r\n    const counter = new Counter();\r\n\r\n    counter.init(METRICS_GUID, String(Math.random()).substr(2, 12), 'Start page');\r\n\r\n    renderApp(counter, render);\r\n\r\n    setTimeout(() => {\r\n        sendMetrics(counter);\r\n    }, Math.random() * 1000 + 500);\r\n}\r\n\r\nexport default withMetrics;\r\n","export const quantile = (arr, q) => {\r\n    const sorted = arr.sort((a, b) => a - b);\r\n    const pos = (sorted.length - 1) * q;\r\n    const base = Math.floor(pos);\r\n    const rest = pos - base;\r\n\r\n    if (sorted[base + 1] !== undefined) {\r\n        return Math.floor(sorted[base] + rest * (sorted[base + 1] - sorted[base]));\r\n    } else {\r\n        return Math.floor(sorted[base]);\r\n    }\r\n};\r\nexport const prepareData = (result) => {\r\n    return result.data.map(item => {\r\n        item.date = item.timestamp.split('T')[0];\r\n\r\n        return item;\r\n    });\r\n};\r\n\r\nexport const msToDays = (ms) => ms / (1000 * 60 * 60 * 24);\r\n\r\nexport const buildRow = (data) => {\r\n    const result = {};\r\n\r\n    result.hits = data.length;\r\n    result.p25 = quantile(data, 0.25);\r\n    result.p50 = quantile(data, 0.5);\r\n    result.p75 = quantile(data, 0.75);\r\n    result.p95 = quantile(data, 0.95);\r\n\r\n    return result;\r\n}\r\n\r\nexport const preparedByName = (data, name) => data.filter(item => item.name === name).map(item => item.value);\r\n\r\nexport const logTable = (data) => {\r\n    const table = {};\r\n\r\n    const connect = preparedByName(data, 'connect');\r\n    const ttfb = preparedByName(data, 'ttfb');\r\n    const dns = preparedByName(data, 'dns');\r\n    const render = preparedByName(data, 'render');\r\n\r\n    table.connect = buildRow(connect);\r\n    table.ttfb = buildRow(ttfb);\r\n    table.dns = buildRow(dns);\r\n    table.render = buildRow(render);\r\n\r\n    console.table(table);\r\n}","import { METRICS_GUID } from \"../constants\";\r\nimport { buildRow, logTable, msToDays, prepareData, preparedByName } from \"./helpers\";\r\n\r\n\r\nconst showMetricByPeriod = (data, page, start, end) => {\r\n    const startDate = new Date(start);\r\n    const endDate = new Date(end);\r\n    const daysBetween = msToDays(endDate - startDate);\r\n\r\n    for (let i = 0; i < daysBetween; i++) {\r\n        startDate.setDate(startDate.getDate() + i + 1);\r\n\r\n        const dateToCalc = startDate.toLocaleString().replace(/,.*/, '').split('.').reverse().join('-');\r\n        showMetricsByDate(data, page, dateToCalc);\r\n    }\r\n}\r\n\r\nconst showSession = (data, requestId, date) => {\r\n    console.log(`All metrics for ${requestId}:`);\r\n\r\n    const sampleData = data.filter(item => item.requestId === requestId && item.date === date);\r\n\r\n    logTable(sampleData);\r\n}\r\n\r\nconst compareMetric = (firstData, secondData, compareName) => {\r\n    console.log(`Compared metrics for ${compareName}:`);\r\n\r\n    const preparedFirstData = preparedByName(firstData, compareName);\r\n    const preparedSecondData = preparedByName(secondData, compareName);\r\n\r\n    const table = {};\r\n\r\n    table.first = buildRow(preparedFirstData);\r\n    table.second = buildRow(preparedSecondData);\r\n\r\n    console.table(table);\r\n\r\n}\r\n\r\nconst showMetricsByDate = (data, page, date) => {\r\n    console.log(`All metrics for ${date}:`);\r\n\r\n    const sampleData = data.filter(item => item.page === page && item.date === date);\r\n\r\n    logTable(sampleData);\r\n};\r\n\r\nexport const buildStats = () => {\r\n    fetch(`https://shri.yandex/hw/stat/data?counterId=${METRICS_GUID}`)\r\n    .then(res => res.json())\r\n    .then(result => {\r\n        const data = prepareData(result);\r\n\r\n        const firstSampleData = data.filter(item => item.requestId === '382773058991');\r\n        const secondSampleData = data.filter(item => item.requestId === '897758255011');\r\n\r\n        showMetricsByDate(data, 'Start page', '2021-10-30');\r\n        showMetricByPeriod(data, 'Start page', '2021-10-29', '2021-10-30');\r\n        showSession(data, '382773058991', '2021-10-30');\r\n        compareMetric(firstSampleData, secondSampleData, 'render');\r\n    });\r\n}\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\nimport { Provider } from 'react-redux';\r\n\r\nimport store from \"./redux/store\";\r\n\r\nimport App from './containers/App';\r\n\r\nimport withMetrics from \"./metrics\";\r\nimport { buildStats } from \"./metrics/stats\";\r\n\r\nimport './assets/fonts/SegoeUI/stylesheet.css';\r\nimport './index.scss';\r\n\r\n\r\nwithMetrics(\r\n    () => ReactDOM.render(\r\n        <Router>\r\n            <Provider store={store}>\r\n                <App/>\r\n            </Provider>\r\n        </Router>,\r\n        document.getElementById('root')\r\n    )\r\n);\r\n\r\nbuildStats();\r\n\r\n"],"sourceRoot":""}